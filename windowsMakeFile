MAINFILE = Main.java
CONNECTORFILE = TERMESConnector
JAVAFILES = Main.java TERMESConnector.java TERMESGUI.java TERMESImageProcessing.java TERMESCalibratingPanel.java TERMESTrackingPanel.java
CPPFILES = ColorDetector.cpp Contrast.cpp TERMESConnector.cpp ErodeAndDilate.cpp

JNIPATH_WINDOWS = "-IC:\Program Files\Java\jdk1.7.0_45\include"
JNIPATH2_WINDOWS = "-IC:\Program Files\Java\jdk1.7.0_45\include\win32"
OPENCVINCLUDEPATH_WINDOWS = "-IC:\OpenCV\build\include"
OPENCVLIBPATH_WINDOWS = -LC:\OpenCV\build\x64\mingw\lib

DYNLIBNAME = libTERMESConnector.dll
OFILES = Contrast.o ColorDetector.o TERMESConnector.o ErodeAndDilate.o
OPENCVLIBS = -lopencv_core246 -lopencv_imgproc246 -lopencv_highgui246 -lopencv_objdetect246 -lopencv_features2d246

TERMESConnector.o: $(CPPFILES) TERMESConnector.h $(JAVAFILES)
	# 	--- Compile the Java project  --- 
	javac $(JAVAFILES)
	# 	--- Create a header file from the Java file containing the native methods --- 
	javah $(CONNECTORFILE)
	# 	--- Compile the C++ (with jni.h) --- 
	g++ $(JNIPATH_WINDOWS) $(JNIPATH2_WINDOWS) $(OPENCVINCLUDEPATH_WINDOWS) -c $(CPPFILES)
	# 	--- Create a dynamic Library, connecting the two --- 
	g++ -shared -o $(DYNLIBNAME) $(OFILES) $(OPENCVINCLUDEPATH_WINDOWS) $(OPENCVLIBPATH_WINDOWS) $(OPENCVLIBS)
	# 	--- DONE! ---