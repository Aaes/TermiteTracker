%!TEX root = Report.tex

\section{Background}

%Projektet er erstatning for GSD hvad betyder det for os? (ved ikke om det skal med)
%Hvilket udstyr havde vi at arbejde med?
%Umiddlebart ville vi gerne have logic code i C++ og GUI i Java så vidt muligt. Hvilke fordele giver det os? hvorfor?
%Hvad for nogen myrer havde vi og var der nogen udfordringer her? (tænk: hvis jeg skal gøre det igen, hvad skal jeg så huske om myrer)
%Hvordan var det med at male myrerne?

This project was undertaken as a substitute for the "Global Software Development" course at the IT University of Copenhagen and therefore has additional emphasis on the international collaboration and developement process. Section XX Process will describe the tools used as well as evaluate the overall process. \\ 

Our councillor at Harvard wanted the tracking and the interfacing with the tracking device to be implemented in C++ to make it easier for further developement. The graphical user interface was not restricted when choosing programming langauge and we ended up using C\# and Windows Forms to implement it.

As mentioned in the project proposal the project was divided into three parts. The first part of the project was to be able to track termites. Since african termites are hard to come by and transport we settled for regular ants instead. While these are not as big as the termites, they behave in a similar way and the solution should be able to easily adapt to the termites. In the first part we started by implementing the tracking on a video. We received a video from Harvard of a single ant running around in a petri dish with a white background. The ant itself was painted red and green to make tracking easier. This was the simplest setup we could think of and acted as a good starting point. By recommendation we decided to use the OpenCV (INDSÆT REF) framework to implement our tracking. We will return to this framework in Section XX Framework. \\

The second part of the project interacting with our tracking device and conform the tracking code to work with the device. We received a Hewlett-Packard (INDSÆT MODEL) XY-plotter by mail from our councillor at Harvard. Additionally we received a small ant farm via mail and we bought some brushes and acryllic paint for the ants. While we discussed using infrared paint or fluorescend paint, both these ideas were discarded because both types of paint contains compounds that the termites and ants really like which makes them eat the painted ant. Along with the plotter we also received a small circuit board that plugged into the serial port of the plotter and had a USB cabel for us to communicate with it. Lastly the package contained a collection of petri dishes for us to use. \\

In this part we had to paint the ants with the paint we bought and we want to give some friendly advice to anyone who wants to do any projects involving ants. If you put them 2-4 minutes in the freezer they become very docile and much easier to paint without harming the ants. When they are taken out they act completely normal after 2-3 minutes. The ants also had a tendency to crawl up the sides of the petri dish. We were recommended to try putting teflon tape (should be really slippery) on the sides without any luck. We were also recommended to try mineral oil but we were unable to get any. Our solution was to place a small petri dish in a bigger petri dish and fill the gap with water. The ants would quickly discover that there was water surronding them which prevented them from escaping the small petri dish. \\

The third part of the project involved constructing the graphical user interface, hooking it up to the tracking code and extracting statistics.  \\

TODO: beskriv third part, indsæt refs.

\subsection{Assumptions}

TODO

\subsection{Scope}

%Kun test i et lab environment
%test på myrer, regner med at det kan generaliseres til termitter (andre størrelser)
%Kun test med de farver maling vi har
%Kun test med denne plotter
%Kontrollerede lysforhold
%Tracker kun een myre ad gangen

While the project lays the foundation for a fully useable field solution we have chosen to narrow our scope to the essential functionality. This also means that the project was designed and tested in a controlled lab environment where factors such as lighting, wind etc. are constant. \\

Because actual termites were out our reach and that our councillor at Harvard recommended it, we did all of our testing with normal ants instead of termites. We are confident that only minor adjustments are necesarry to make the solution work with termites since the main difference is the size. \\

Painting the ants in different colors can have some impact in the quality of the tracking. As a rule of thumb it is easier to track colors that contrast the background the most. In this project we chose to paint the ants white and bright green. We did not try any other colors because we found these to have a high degree of contrast which were sufficient. \\

As the HP INDSÆT MODEL plotter was the only hardware available to us we have restricted the project to only include this type of plotter. One could potentially gain better results with a plotter with a finer granularity in coordinates and smoother movement. \\

While it could be intereseting to track several ants we have chosen to focus on tracking a single ant in this project due to time restrictions. However, we do not believe that there are any technical barriers against this and would simply require more time to implement.

\subsection{Requirements}

Maa jeg foreslaa at i laver 2 modes (man kan f.eks. vaelge mode i menuen
af toppen af programmet).
1. Den ene er kalibrerings mode hvor man kan se det direkte feed oeverst
til venstre, samt billedbehandlet billede oeverst til hoejre, og sliders
nedenfor.
2. Nummer to er tracking mode hvor man kan see feedet fra kameraet taet
paa oeverst til venstre, feedet fra overview-kameraet oeverst til hoejre,
og saa statistik/grafer nederst til venstre, og valgmuligheder mht til
statistik og hvor filerne skal gemmes mv. nederst til hoejre? + start
knap.
3. Hvis i faar tid kan i tilfoeje en bias-mode hvor man kan klikke paa et
punkt i skaalen som plotteren skal forsoege at traekke myren imod (ved
hjaelp af mad).

1. Position i skaalen over tid (marker dens rute). + indstilling for hvor
lang tid tilbage ruten skal vises.
1. Gennemsnitshastighed/tid (siden start), +indstilling for running average.
2. Heatmap over hvor myren opholder sig mest i skaalen, (groft firkantet
grid er fint til at starte med).
3. Heatmap over hvor myren holder pauser i skaalen, +indstilling for hvor
lang en 'pause' er, hvor lav den gennemsnitshastighed skal vaere.
3. Tael andre myrer den moeder/tid. +Indstilling for afstand af et 'moede'.
4. Hvor lang tid der gaar imellem den moeder andre/tid (siden start).
5. Hvor meget tid den pauser naer andre myrer/tid. +Indstilling for
afstand+pause laengde
6. Hvor meget af skaalen den har undersoegt (Additivt) over tid.
+Indstilling for radius af hovedet, (hvor langt fra center af hovedet den
kan  undersoege af gangen)
7. Hvor meget nyt areal den daekker hvert interval over tid. +instilling
for interval: f.eks. 30s/1min/2min
8. Mean free path. (maal hvor lang tid der gaar mellem pauser. Pauserne
defineres af lav gennemsnitshastighed)

Mht gui'en er et mere objekt-orienteret sprog fint med mig. Saa laenge at
selve data- og billed behandlingen foregaar i C/C++.
Nedenfor har jeg forsoegt at beskrive projektet lidt mere specifikt. Hvis
i stadig er interesseret i projektet synes jeg at vi skal tage en
skype-snak om helt noejagtige instruktioner.

1. UI:
Brugervenligt, visning af live video, samt statistikker for opsamlet data.
Bruger input til manuel styring af plotteren, aendring af billed
behandlings-parametre i tilfaelde af at udstyret skal bruges til andre
insekter i fremtiden, samt input af punkter i arenaen plotteren skal
forsoege at styre imod, eller undgaa.

2. Tracking:
Formentlig den stoerste udfordring. Plotteren skal kunne tracke en termit
maerket med roed og groen maling ud fra et lav resolutions-kamera monteret
paa manipulatoren. (Hvis i finder et bedre alternativ til det nuvaerende
kamera, kan vi sagtens koebe et nyt). Termitten er hvid og brun, og dens
baggrund roed/brun jord, derudover vil den vaere omgivet af mange andre
(u-maerkede) termitter. De bevaeger sig op til 2cm/s og manipulatoren skal
helst bevares indenfor 0.5cm radius af hovedet (uden at ramme den eller
andre termitter).
Jeg vil foreslaa at i starter med at tracke myrer (de er nemmest at
finde), paa hvid baggrund, og derefter paa jord.

3. Styring af manipulator:
Manipulatorens position skal aendres afhaengigt af outputtet fra
tracking-softwaret. Hardwaret kan modtage serielle kommandoer om ny
oensket position. Hvis i oensker adgang til softwaren paa
microcontrolleren som styrer plotteren kan det ogsaa sagtens arrangeres.
Det kan blive noedvendigt at indfoere soft-start hvis plotteren skal
bevaeges langt for at undgaa pludselige ryk i maskinen der kan skraemme
insekterne.

5. Data behandling: Dette vil involvere mange maader at behandle den
indsamlede data paa. F.eks. beregning af hastighed/tid,
mean-free-path/tid, histogram af position i arenaen/tid, maengde af
interaktion/tid, mm. Jeg sender gerne en laengere liste hvis i er
interesserede.

